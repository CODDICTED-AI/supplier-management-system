# å†œç¦å°šæ±‡å®¢æˆ·ç®¡ç†ç³»ç»Ÿ - å®Œæ•´éƒ¨ç½²æŒ‡å—

## ğŸ“‹ éƒ¨ç½²æ¦‚è§ˆ

æœ¬ç³»ç»Ÿé‡‡ç”¨ç°ä»£åŒ–çš„äº‘éƒ¨ç½²æ¶æ„ï¼š
- **å‰ç«¯**: Vercel (React + TypeScript)
- **åç«¯**: Render (Node.js + Express + TypeScript)  
- **æ•°æ®åº“**: Supabase (PostgreSQL)
- **æ–‡ä»¶å­˜å‚¨**: æœ¬åœ°å­˜å‚¨ (Render æœåŠ¡å™¨)

## ğŸš€ ç¬¬ä¸€æ­¥ï¼šå‡†å¤‡ GitHub ä»“åº“

### 1.1 ç¡®ä¿ä»£ç å·²æ¨é€åˆ° GitHub
```bash
# æ£€æŸ¥å½“å‰çŠ¶æ€
git status

# å¦‚æœæœ‰æœªæäº¤çš„æ›´æ”¹ï¼Œå…ˆæäº¤
git add .
git commit -m "å®Œæˆç³»ç»Ÿä¼˜åŒ–ï¼Œå‡†å¤‡éƒ¨ç½²"

# æ¨é€åˆ° GitHub
git push origin main
```

### 1.2 éªŒè¯ä»“åº“ç»“æ„
ç¡®ä¿æ‚¨çš„ GitHub ä»“åº“åŒ…å«ä»¥ä¸‹ç›®å½•ç»“æ„ï¼š
```
supplier-management-system/
â”œâ”€â”€ frontend/          # React å‰ç«¯
â”œâ”€â”€ backend/           # Node.js åç«¯
â”œâ”€â”€ README.md
â”œâ”€â”€ vercel.json        # Vercel é…ç½®
â””â”€â”€ .gitignore
```

## ğŸ—„ï¸ ç¬¬äºŒæ­¥ï¼šè®¾ç½® Supabase æ•°æ®åº“

### 2.1 åˆ›å»º Supabase é¡¹ç›®
1. è®¿é—® [https://supabase.com](https://supabase.com)
2. ä½¿ç”¨ GitHub è´¦å·ç™»å½•
3. ç‚¹å‡» "New Project"
4. å¡«å†™é¡¹ç›®ä¿¡æ¯ï¼š
   - **Organization**: é€‰æ‹©æ‚¨çš„ç»„ç»‡
   - **Name**: `supplier-management-db`
   - **Database Password**: è®¾ç½®ä¸€ä¸ªå¼ºå¯†ç ï¼ˆè¯·è®°ä½ï¼‰
   - **Region**: é€‰æ‹©ç¦»æ‚¨æœ€è¿‘çš„åŒºåŸŸï¼ˆæ¨è `ap-northeast-1`ï¼‰

### 2.2 è·å–æ•°æ®åº“è¿æ¥ä¿¡æ¯
1. é¡¹ç›®åˆ›å»ºå®Œæˆåï¼Œè¿›å…¥é¡¹ç›®ä»ªè¡¨æ¿
2. ç‚¹å‡»å·¦ä¾§èœå• "Settings" â†’ "Database"
3. è®°å½•ä»¥ä¸‹ä¿¡æ¯ï¼š
   - **Host**: `db.xxxxxxxxxxxxx.supabase.co`
   - **Database name**: `postgres`
   - **Port**: `5432`
   - **User**: `postgres`
   - **Password**: æ‚¨è®¾ç½®çš„å¯†ç 

### 2.3 åˆ›å»ºæ•°æ®åº“è¡¨
1. ç‚¹å‡»å·¦ä¾§èœå• "SQL Editor"
2. ç‚¹å‡» "New query"
3. å¤åˆ¶å¹¶ç²˜è´´ä»¥ä¸‹ SQL ä»£ç ï¼š

```sql
-- PostgreSQL æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬
-- é€‚ç”¨äº Supabase

-- 1. ä¾›åº”å•†è¡¨ (suppliers)
CREATE TABLE IF NOT EXISTS suppliers (
  id SERIAL PRIMARY KEY,
  company_name VARCHAR(255) NOT NULL UNIQUE,
  contact_person VARCHAR(100) NOT NULL,
  contract_start_date DATE,
  contract_end_date DATE,
  logistics_type VARCHAR(10) DEFAULT 'éšè´§' CHECK (logistics_type IN ('éšè´§', 'ç‹¬ç«‹')),
  contract_file_path VARCHAR(500),
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- 2. ä¾›åº”å•†äº§å“è¡¨ (supplier_products)
CREATE TABLE IF NOT EXISTS supplier_products (
  id SERIAL PRIMARY KEY,
  supplier_id INTEGER NOT NULL,
  product_name VARCHAR(255) NOT NULL,
  supply_price DECIMAL(10,2) NOT NULL,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (supplier_id) REFERENCES suppliers(id) ON DELETE CASCADE
);

-- 3. è®¢å•è¡¨ (orders)
CREATE TABLE IF NOT EXISTS orders (
  id SERIAL PRIMARY KEY,
  supplier_id INTEGER NOT NULL,
  order_contact VARCHAR(100) NOT NULL,
  product_name VARCHAR(255) NOT NULL,
  order_date DATE NOT NULL,
  unit_price DECIMAL(10,2) NOT NULL,
  quantity INTEGER NOT NULL,
  total_amount DECIMAL(10,2) GENERATED ALWAYS AS (unit_price * quantity) STORED,
  expected_delivery_date DATE,
  status VARCHAR(10) DEFAULT 'æœªå®Œæˆ' CHECK (status IN ('æœªå®Œæˆ', 'å·²å®Œæˆ')),
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (supplier_id) REFERENCES suppliers(id)
);

-- åˆ›å»ºç´¢å¼•
CREATE INDEX IF NOT EXISTS idx_suppliers_company_name ON suppliers(company_name);
CREATE INDEX IF NOT EXISTS idx_orders_supplier_id ON orders(supplier_id);
CREATE INDEX IF NOT EXISTS idx_orders_status ON orders(status);
CREATE INDEX IF NOT EXISTS idx_orders_order_date ON orders(order_date);

-- åˆ›å»ºæ›´æ–°æ—¶é—´è§¦å‘å™¨
CREATE OR REPLACE FUNCTION update_updated_at_column()
RETURNS TRIGGER AS $$
BEGIN
    NEW.updated_at = CURRENT_TIMESTAMP;
    RETURN NEW;
END;
$$ language 'plpgsql';

CREATE TRIGGER update_suppliers_updated_at BEFORE UPDATE ON suppliers
    FOR EACH ROW EXECUTE FUNCTION update_updated_at_column();

CREATE TRIGGER update_orders_updated_at BEFORE UPDATE ON orders
    FOR EACH ROW EXECUTE FUNCTION update_updated_at_column();
```

4. ç‚¹å‡» "Run" æ‰§è¡Œ SQL è„šæœ¬
5. éªŒè¯è¡¨åˆ›å»ºæˆåŠŸï¼ˆå·¦ä¾§èœå• "Table Editor" ä¸­åº”è¯¥èƒ½çœ‹åˆ°ä¸‰ä¸ªè¡¨ï¼‰

## âš™ï¸ ç¬¬ä¸‰æ­¥ï¼šéƒ¨ç½²åç«¯åˆ° Render

### 3.1 åˆ›å»º Render è´¦å·
1. è®¿é—® [https://render.com](https://render.com)
2. ä½¿ç”¨ GitHub è´¦å·ç™»å½•

### 3.2 åˆ›å»º Web Service
1. ç‚¹å‡» "New +" â†’ "Web Service"
2. è¿æ¥æ‚¨çš„ GitHub ä»“åº“
3. é€‰æ‹© `supplier-management-system` ä»“åº“

### 3.3 é…ç½®æœåŠ¡
å¡«å†™ä»¥ä¸‹é…ç½®ä¿¡æ¯ï¼š

**åŸºæœ¬ä¿¡æ¯ï¼š**
- **Name**: `supplier-management-backend`
- **Root Directory**: `backend`
- **Runtime**: `Node`
- **Build Command**: `npm install && npm run build`
- **Start Command**: `npm start`
- **Plan**: é€‰æ‹© "Free"

**ç¯å¢ƒå˜é‡ï¼š**
ç‚¹å‡» "Environment Variables" éƒ¨åˆ†ï¼Œæ·»åŠ ä»¥ä¸‹å˜é‡ï¼š

```
DB_HOST=db.xxxxxxxxxxxxx.supabase.co
DB_USER=postgres
DB_PASSWORD=æ‚¨çš„Supabaseæ•°æ®åº“å¯†ç 
DB_NAME=postgres
DB_PORT=5432
DB_SSL=true
PORT=3001
NODE_ENV=production
UPLOAD_PATH=./uploads
```

**é‡è¦æç¤ºï¼š**
- å°† `db.xxxxxxxxxxxxx.supabase.co` æ›¿æ¢ä¸ºæ‚¨çš„å®é™… Supabase ä¸»æœºåœ°å€
- å°† `æ‚¨çš„Supabaseæ•°æ®åº“å¯†ç ` æ›¿æ¢ä¸ºæ‚¨åœ¨ Supabase ä¸­è®¾ç½®çš„å®é™…å¯†ç 

### 3.4 åˆ›å»ºæœåŠ¡
1. ç‚¹å‡» "Create Web Service"
2. ç­‰å¾…éƒ¨ç½²å®Œæˆï¼ˆé€šå¸¸éœ€è¦ 2-5 åˆ†é’Ÿï¼‰
3. éƒ¨ç½²æˆåŠŸåï¼Œè®°å½•ç”Ÿæˆçš„ URLï¼ˆä¾‹å¦‚ï¼š`https://supplier-management-backend.onrender.com`ï¼‰

### 3.5 éªŒè¯åç«¯éƒ¨ç½²
1. åœ¨æµè§ˆå™¨ä¸­è®¿é—®ï¼š`https://supplier-management-backend.onrender.com/api/health`
2. åº”è¯¥çœ‹åˆ°ç±»ä¼¼ä»¥ä¸‹çš„å“åº”ï¼š
```json
{
  "status": "ok",
  "timestamp": "2024-01-01T00:00:00.000Z"
}
```

## ğŸ¨ ç¬¬å››æ­¥ï¼šéƒ¨ç½²å‰ç«¯åˆ° Vercel

### 4.1 åˆ›å»º Vercel è´¦å·
1. è®¿é—® [https://vercel.com](https://vercel.com)
2. ä½¿ç”¨ GitHub è´¦å·ç™»å½•

### 4.2 å¯¼å…¥é¡¹ç›®
1. ç‚¹å‡» "New Project"
2. é€‰æ‹©æ‚¨çš„ GitHub ä»“åº“ `supplier-management-system`
3. é…ç½®é¡¹ç›®ï¼š
   - **Framework Preset**: é€‰æ‹© "Other"
   - **Root Directory**: `frontend`
   - **Build Command**: `npm run build`
   - **Output Directory**: `build`
   - **Install Command**: `npm install`

### 4.3 é…ç½®ç¯å¢ƒå˜é‡
åœ¨ "Environment Variables" éƒ¨åˆ†æ·»åŠ ï¼š

```
REACT_APP_API_URL=https://supplier-management-backend.onrender.com/api
```

**é‡è¦ï¼š** å°† URL æ›¿æ¢ä¸ºæ‚¨å®é™…çš„ Render åç«¯ URL

### 4.4 éƒ¨ç½²é¡¹ç›®
1. ç‚¹å‡» "Deploy"
2. ç­‰å¾…éƒ¨ç½²å®Œæˆï¼ˆé€šå¸¸éœ€è¦ 1-3 åˆ†é’Ÿï¼‰
3. éƒ¨ç½²æˆåŠŸåï¼Œè®°å½•ç”Ÿæˆçš„ URLï¼ˆä¾‹å¦‚ï¼š`https://supplier-management-system.vercel.app`ï¼‰

## ğŸ”§ ç¬¬äº”æ­¥ï¼šæµ‹è¯•ç³»ç»Ÿ

### 5.1 åŠŸèƒ½æµ‹è¯•
1. è®¿é—®æ‚¨çš„å‰ç«¯ URL
2. æµ‹è¯•ä»¥ä¸‹åŠŸèƒ½ï¼š
   - âœ… ä¾›åº”å•†ç®¡ç†ï¼šæ·»åŠ ã€ç¼–è¾‘ã€åˆ é™¤ä¾›åº”å•†
   - âœ… è®¢å•ç®¡ç†ï¼šåˆ›å»ºã€æŸ¥çœ‹ã€å®Œæˆè®¢å•
   - âœ… æ–‡ä»¶ä¸Šä¼ ï¼šä¸Šä¼  PDF åˆåŒæ–‡ä»¶
   - âœ… æœç´¢åŠŸèƒ½ï¼šæŒ‰å…¬å¸åç§°æˆ–äº§å“åç§°æœç´¢
   - âœ… åˆ†é¡µåŠŸèƒ½ï¼šè®¢å•åˆ—è¡¨åˆ†é¡µæ˜¾ç¤º

### 5.2 æ•°æ®åº“éªŒè¯
1. åœ¨ Supabase ä»ªè¡¨æ¿ä¸­æŸ¥çœ‹ "Table Editor"
2. ç¡®è®¤æ•°æ®æ­£ç¡®ä¿å­˜åˆ°æ•°æ®åº“ä¸­

## ğŸ“± ç¬¬å…­æ­¥ï¼šåˆ†äº«ç»™å…¶ä»–ç”¨æˆ·

### 6.1 è·å–è®¿é—®é“¾æ¥
- **å‰ç«¯åœ°å€**: `https://your-project-name.vercel.app`
- **åç«¯åœ°å€**: `https://your-backend-name.onrender.com`

### 6.2 ç”¨æˆ·è®¿é—®
å…¶ä»–ç”¨æˆ·åªéœ€è¦å‰ç«¯åœ°å€å³å¯ä½¿ç”¨ç³»ç»Ÿï¼Œæ— éœ€å®‰è£…ä»»ä½•è½¯ä»¶ã€‚

## ğŸ”’ ç¬¬ä¸ƒæ­¥ï¼šå®‰å…¨é…ç½®ï¼ˆå¯é€‰ï¼‰

### 7.1 è®¾ç½®è‡ªå®šä¹‰åŸŸå
å¦‚æœæ‚¨æœ‰è‡ªå·±çš„åŸŸåï¼Œå¯ä»¥åœ¨ Vercel å’Œ Render ä¸­é…ç½®è‡ªå®šä¹‰åŸŸåã€‚

### 7.2 æ•°æ®åº“å®‰å…¨
1. åœ¨ Supabase ä¸­è®¾ç½® Row Level Security (RLS)
2. é…ç½®æ•°æ®åº“è®¿é—®ç­–ç•¥

## ğŸš¨ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ

#### 1. åç«¯éƒ¨ç½²å¤±è´¥
**é—®é¢˜**: Build å¤±è´¥æˆ–å¯åŠ¨å¤±è´¥
**è§£å†³æ–¹æ¡ˆ**:
- æ£€æŸ¥ç¯å¢ƒå˜é‡æ˜¯å¦æ­£ç¡®è®¾ç½®
- ç¡®è®¤ Supabase æ•°æ®åº“è¿æ¥ä¿¡æ¯æ­£ç¡®
- æŸ¥çœ‹ Render æ—¥å¿—è·å–è¯¦ç»†é”™è¯¯ä¿¡æ¯

#### 2. å‰ç«¯æ— æ³•è¿æ¥åç«¯
**é—®é¢˜**: å‰ç«¯æ˜¾ç¤ºè¿æ¥é”™è¯¯
**è§£å†³æ–¹æ¡ˆ**:
- ç¡®è®¤ `REACT_APP_API_URL` ç¯å¢ƒå˜é‡è®¾ç½®æ­£ç¡®
- æ£€æŸ¥åç«¯æœåŠ¡æ˜¯å¦æ­£å¸¸è¿è¡Œ
- éªŒè¯ CORS é…ç½®

#### 3. æ•°æ®åº“è¿æ¥å¤±è´¥
**é—®é¢˜**: åç«¯æ— æ³•è¿æ¥æ•°æ®åº“
**è§£å†³æ–¹æ¡ˆ**:
- æ£€æŸ¥ Supabase è¿æ¥ä¿¡æ¯
- ç¡®è®¤æ•°æ®åº“è¡¨å·²æ­£ç¡®åˆ›å»º
- éªŒè¯ç½‘ç»œè¿æ¥

#### 4. æ–‡ä»¶ä¸Šä¼ å¤±è´¥
**é—®é¢˜**: æ— æ³•ä¸Šä¼  PDF æ–‡ä»¶
**è§£å†³æ–¹æ¡ˆ**:
- ç¡®è®¤æ–‡ä»¶å¤§å°ä¸è¶…è¿‡ 5MB
- æ£€æŸ¥æ–‡ä»¶æ ¼å¼æ˜¯å¦ä¸º PDF
- éªŒè¯æœåŠ¡å™¨å­˜å‚¨æƒé™

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœåœ¨éƒ¨ç½²è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼š

1. **æŸ¥çœ‹æ—¥å¿—**:
   - Render åç«¯æ—¥å¿—ï¼šåœ¨ Render ä»ªè¡¨æ¿ä¸­æŸ¥çœ‹
   - Vercel å‰ç«¯æ—¥å¿—ï¼šåœ¨ Vercel ä»ªè¡¨æ¿ä¸­æŸ¥çœ‹

2. **æ£€æŸ¥çŠ¶æ€**:
   - åç«¯å¥åº·æ£€æŸ¥ï¼š`https://your-backend-url/api/health`
   - å‰ç«¯çŠ¶æ€ï¼šç›´æ¥è®¿é—®å‰ç«¯ URL

3. **å¸¸è§é”™è¯¯ä»£ç **:
   - `ECONNREFUSED`: æ•°æ®åº“è¿æ¥å¤±è´¥
   - `ENOTFOUND`: ä¸»æœºåè§£æå¤±è´¥
   - `ETIMEDOUT`: è¿æ¥è¶…æ—¶

## ğŸ‰ éƒ¨ç½²å®Œæˆ

æ­å–œï¼æ‚¨çš„å†œç¦å°šæ±‡å®¢æˆ·ç®¡ç†ç³»ç»Ÿå·²ç»æˆåŠŸéƒ¨ç½²åˆ°äº‘ç«¯ã€‚ç³»ç»Ÿç°åœ¨å¯ä»¥ï¼š

- âœ… æ”¯æŒå¤šç”¨æˆ·åŒæ—¶è®¿é—®
- âœ… æ•°æ®å®‰å…¨å­˜å‚¨åœ¨äº‘ç«¯
- âœ… è‡ªåŠ¨å¤‡ä»½å’Œæ¢å¤
- âœ… é«˜å¯ç”¨æ€§å’Œç¨³å®šæ€§
- âœ… éšæ—¶éšåœ°è¿›è¡Œç®¡ç†

**ç³»ç»Ÿåœ°å€**: `https://your-project-name.vercel.app`

ç°åœ¨æ‚¨å¯ä»¥å°†è¿™ä¸ªé“¾æ¥åˆ†äº«ç»™éœ€è¦ä½¿ç”¨çš„ç”¨æˆ·ï¼Œä»–ä»¬å°±å¯ä»¥é€šè¿‡æµè§ˆå™¨è®¿é—®æ‚¨çš„å®¢æˆ·ç®¡ç†ç³»ç»Ÿäº†ï¼ 